# 🕐 Планирование задач

## Описание

Для автоматической синхронизации данных библиотеки можно использовать планировщик задач операционной системы.

## Примеры конфигурации

### Windows Task Scheduler

1. Откройте "Планировщик заданий"
2. Создайте новую задачу
3. Настройте триггеры:
   - Ежедневно в 02:00 для синхронизации метаданных
   - Еженедельно в воскресенье 03:00 для синхронизации файлов

4. Действия:
   - Программа: `C:\Program Files\nodejs\npx.cmd`
   - Аргументы: `tsx src/scripts/scheduled-book-worm.ts`
   - Рабочая папка: `C:\path\to\your\Fiction-Library`

### Linux Cron

Добавьте следующие строки в crontab (`crontab -e`):

```bash
# Синхронизация метаданных ежедневно в 02:00
0 2 * * * cd /path/to/Fiction-Library && npx tsx src/scripts/scheduled-book-worm.ts

# Синхронизация файлов еженедельно в воскресенье 03:00
0 3 * * 0 cd /path/to/Fiction-Library && npx tsx src/scripts/scheduled-book-worm.ts
```

### Использование переменных окружения

Для настройки интервала запуска можно использовать переменную окружения:

```bash
# Установка интервала в 60 минут
BOOK_WORM_INTERVAL=60 npx tsx src/scripts/scheduled-book-worm.ts
```

## Рекомендуемое расписание

### Для разработки:
- Синхронизация метаданных: каждые 30 минут
- Синхронизация файлов: каждые 2 часа

### Для продакшена:
- Синхронизация метаданных: ежедневно в 02:00
- Синхронизация файлов: еженедельно в воскресенье 03:00

## Мониторинг

Рекомендуется настроить логирование выполнения задач для отслеживания их корректной работы:

```bash
# Пример с логированием
0 2 * * * cd /path/to/Fiction-Library && npx tsx src/scripts/scheduled-book-worm.ts >> /var/log/fiction-library-sync.log 2>&1
```